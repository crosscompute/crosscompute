Consider replacing multiprocessing with asyncio or curio or trio where appropriate
Add unit tests
